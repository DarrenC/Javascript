<!DOCTYPE html> 
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.8.1.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css" />

    <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script>
    <script src="detectmobilebrowser.js" type="text/javascript"></script>
    <script src="jquery.cookie.js" type="text/javascript"></script>    

    <script type="text/javascript"> 
     $(document).ready(function() {    	
    	 $('#stay').click(function(){
    		 $.cookie('monacoMobileChoice', 'notMobile', { expires: 365 });
    	 });
    	   
    	 $('#go').click(function(){
    		 $.cookie('monacoMobileChoice', 'mobile', { expires: 365 });
         });
    	 
    	 
    	 // Check mobile
    	 var isMobile = jQuery.browser.mobile;    	    
    	 if(isMobile){    	    	   
    		 // Check Cookie
    		 var cookieChoice = $.cookie('monacoMobileChoice'); 
    		 if(null != cookieChoice){
    			 if(cookieChoice == 'mobile'){
    				$('#message').val('send to mobile site'); 
    				$('#myPopupDiv').popup("close")
    			 }else{
    				$('#message').val('keep on regular site');
    				$('#myPopupDiv').popup("close")
    			 }
    		 }else{
    			 // Displqy the popup
    			 $('#popupBasic').popup("open");
    			 // TODO - save the choice in a cookie
    		 }    		     	       
    	 }    	     
     });
     </script>
</head>
<body>
    test page
    <input id="message" type="text" size="50">
    
    <div data-role="popup" id="popupBasic">
        <p>We detected a mobile device. Would you like to go to our mobile site?<p>
        <input type="button" id="stay" value='stay on regular site'/>
        <input type="button" id="go" value='go to mobile'/>
    </div>
    
    <div data-role="popup" id="popupNonBasic">
        <p>This is a no options set.<p>
    </div>
    
</body>
</html>